import { getPrefix } from '../../_global/js/global.js'

const template = `
  <svg width="800" height="800" viewBox="0 0 211.667 211.667" xml:space="preserve" xmlns="http://www.w3.org/2000/svg">
    <g class="leg-left">
      <path class="leg" fill="#9f6d4d" d="M79.625 159.74s.386 12.065-.178 12.597c-.563.533-2.867 1.435-3.846 1.435-.98 0-7.315-.135-8.29 1.174-.974 1.308-1.652 3.446-.434 3.756 1.218.31 10.865-.981 11.234-.516.368.465 1.404 1.95 3.014 1.872 1.609-.077 3.622-1.559 3.622-1.559s12.184 1.062 11.826.17c-.359-.891-2.135-3.757-3.375-4.04-1.24-.284-7.342-.815-7.935-1.653-.593-.838-.24-12.956-.24-12.956z"/>
    </g>

    <g class="leg-right">
      <path class="leg" fill="#9f6d4d" d="M100.873 161.3s.385 12.065-.179 12.597c-.563.533-2.866 1.435-3.846 1.435s-7.315-.135-8.29 1.174c-.974 1.308-1.652 3.446-.434 3.756 1.218.31 10.865-.981 11.234-.516.369.465 1.404 1.95 3.014 1.872 1.609-.077 3.623-1.559 3.623-1.559s12.183 1.062 11.825.17c-.358-.891-2.135-3.757-3.375-4.04-1.24-.284-7.341-.815-7.934-1.653-.593-.838-.24-12.956-.24-12.956z"/>
    </g>

    <path fill="#656e7f" d="M73.484 148.972s2.375 15.379 6.862 16.399c4.486 1.02 12.35-5.692 12.814-11.258.464-5.566-19.676-5.141-19.676-5.141zM94.731 150.532s2.375 15.379 6.862 16.399c4.486 1.02 12.35-5.692 12.815-11.258.463-5.566-19.677-5.141-19.677-5.141z"/>

    <path class="tail" fill="#2d3252" d="M139.082 147.13s24.433 14.848 29.542 14.382c5.11-.467 9.755-2.606 9.755-2.606s8.802-2.73 8.903-7.053c.1-4.324-18.713-11.987-23.585-12.452-4.872-.465-25.945-2.513-24.615 7.729z"/>

    <path class="body" fill="#72819c" d="M39.774 95.238s-2.413 8.828-1.659 17.521c.754 8.693 6.087 37.904 49.21 42.68 43.122 4.777 54.455-5.177 57.15-5.302 2.697-.124 13.943 2.135 16.674.247 2.73-1.887-35.008-37.543-52.18-48.642-6.913-4.468-23.708 3.637-36.365 2.745-12.656-.892-30.911-14.078-32.83-9.25Z"/>
    
    <path class="head" fill="#454868" d="M38.619 97.768c1.53 9.937 21.151 13.934 29.586 15.067 8.435 1.133 42.113-7.126 42.017-11.707-.106-4.99-7.426-16.024-10.501-24.444-3.075-8.42-6.072-10.1-8.238-19.173-1.28-5.361-.704-22.31-15.967-22.146-15.263.164-16.678 10.465-19.405 21.15-2.726 10.684-7.509 15.727-7.509 15.727S36.96 86.988 38.62 97.768z"/>

    <g class="peak">
      <ellipse fill="#ececec" cx="-58.164" cy="53.451" rx="4.04" ry="2.615" transform="scale(-1 1)"/>
      <rect class="base" width="15" height="15" fill="#9f6d4d" x="45" y="50" />
    </g>

    <g class="eyes">
      <rect width="80" height="15" x="35" y="40" opacity="0" />
      <g class="eye-right">
          <circle fill="#f5f5f5" cx="1" cy="1" r="4.093"/>
          <circle fill="#0a0026" stroke="#8b38a9" stroke-width=".906814" cx="1" cy="1" r="2.648"/>
      </g>

      <g class="eye-left">
        <circle fill="#f5f5f5" cx="1" cy="1" r="4.093"/>
        <circle fill="#0a0026" stroke="#8b38a9" stroke-width=".906814" cx="1" cy="1" r="2.648"/>
      </g>
    </g>
    

    <g class="wing">
      <path class="base" fill="#848fa5" d="M-485.036 234.52c-6.63 7.39-13.279 25.64.218 42.057 13.498 16.416 69.925 16.731 86.326 14.16 16.402-2.57-16.653-29.438-31.183-39.298-14.53-9.861-31.403-41.436-55.36-16.92z" transform="matrix(.98275 0 0 .98275 557.917 -144.537)"/>
      
      <path class="stripes" fill="#2d3252" d="M-402.915 273.387c-1.34 5.925-3.581 13.192-7.174 18.35 4.76-.205 8.78-.558 11.598-1 8.343-1.307 3.88-8.904-4.424-17.35zM-418.999 259.288c-6.098 13.783-13.357 22.935-19.347 28.82a73.048 73.048 0 0 1-3.014 2.798c5.464.517 10.928.817 16.113.944 5.296-6.064 10.92-14.106 15.892-24.547a207.431 207.431 0 0 0-9.644-8.015zM-438.05 244.19c-7.761 16.849-17.054 27.238-24.378 33.47-4.224 3.595-7.635 5.737-9.825 6.929 4.528 1.742 9.78 3.113 15.378 4.176a77.471 77.471 0 0 0 2.299-1.88c8.076-6.873 17.86-17.856 26.096-34.624-.408-.283-.811-.562-1.195-.823-2.7-1.832-5.482-4.415-8.374-7.248z" transform="matrix(.98275 0 0 .98275 557.917 -144.537)"/>
    </g>
  </svg>
`

const directionsType = [`left`, `right`].map(direction => getPrefix(direction))

class Palumba extends HTMLElement {
  constructor() {
    super()
  }

  updateDirection() {
    this.classList.remove(...directionsType)
    const directionAttr = getPrefix(this.getAttribute('direction'))

    if (directionsType.includes(directionAttr)) {
      this.classList.add(directionAttr)
    } else {
      this.classList.add(getPrefix('left'))
    }
  }

  connectedCallback() {
    this.innerHTML = template
    this.classList.add('palumba')
    this.updateDirection()
  }

  static get observedAttributes() {
    return ['direction']
  }

  attributeChangedCallback(prop) {
    switch (prop) {
      case 'direction':
        this.updateDirection()
        break
    }
  }
}

window.customElements.define(getPrefix('palumba'), Palumba)
